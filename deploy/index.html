<!doctype html>
<html lang="fr">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	
	<link rel="stylesheet" href="/assets/css/index.css">
	<link rel="stylesheet" href="/assets/css/bootstrap-icons.css">

	
	<link href="/_pagefind/pagefind-ui.css" rel="stylesheet">
	<script src="/_pagefind/pagefind-ui.js" type="text/javascript"></script>
	<script src="/assets/js/pagefind.js"></script>

	<title>11ty Example</title>
</head>

<body>
	<div class="navbar bg-base-100">
  <div class="navbar-start">
    <div class="dropdown">
      <label tabindex="0" class="btn btn-ghost btn-circle">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="h-5 w-5">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h7"></path>
        </svg>
      </label>
      <ul slot="navigation" tabindex="0" class="menu menu-sm dropdown-content mt-3 z-[1] p-2 shadow bg-base-100 rounded-box w-52">
        <li><a href="/">Homepage</a></li>
        <li><a href="/deploy/">Déploiement</a></li>
        <li><a href="/about/">A propos</a></li>
      </ul>
    </div>
  </div>
  <div class="navbar-center">
    <a href="/" class="btn btn-ghost normal-case text-xl">Antagene</a>
  </div>
  <div class="navbar-end">
    <button onclick="searchModal.showModal()" class="btn btn-ghost btn-circle">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="h-5 w-5">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
      </svg>
    </button>
  </div>
</div>
	<main class="min-h-[calc(100vh-64px-52px)]">
		<article class="prose lg:prose-xl mx-auto max-w-screen-lg px-10"><h1>Déploiement</h1>
<h2>Prérequis</h2>
<p>Avant de partir sur le déploiement du projet, assurez d'avoir bien respecté les étapes de la <a href="/documentation">documentation</a> pour le développement.</p>
<h2>Configuration du serveur</h2>
<p>Cette étape n'est plus nécessaire, car le serveur est déjà configuré, mais s'il faut refaire la configuration sur un autre serveur, voici les étapes à suivre.</p>
<p><strong>Note :</strong> Pour réaliser ces étapes, il faut avoir un domaine entier réservé au serveur. Il n'est pas possible de faire cohabiter l'application avec un autre site web sur le même domaine.</p>
<h3>Ajout du dépôt Git</h3>
<p>Pour ajouter le dépôt Git, rendez-vous sur le serveur Plesk. Ensuite, allez sur le domaine et cliquez sur <code>Git</code>.</p>
<p>Ensuite, cliquez sur <code>Add Repository</code> pour ajouter le dépôt Git.</p>
<p>Ensuite, entrez les informations suivantes :</p>
<ul>
<li><strong>Repository name</strong> : <code>stuart</code></li>
<li><strong>Repository URL</strong> : <code>git@github.com:ServiceInformation/next-stuart.git</code></li>
<li><strong>Repository branch</strong> : <code>main</code></li>
<li><strong>Server path</strong> : <code>/path/to/root/document/server</code></li>
</ul>
<blockquote>
<p><strong>Attention :</strong> Si vous êtes sur un serveur ou il y a déjà 1 ou plusieurs dépôts Git, il faut changer le nom du dépôt pour éviter les conflits.</p>
</blockquote>
<h3>Configuration du Node.js</h3>
<p>Pour configurer Node.js, il faut d'abord avoir ajouter le dépôt Git et fait un premier <code>Pull now</code> pour récupérer les fichiers du projet.</p>
<p>Ensuite, allez sur le domaine et cliquez sur <code>Node.js</code>.</p>
<blockquote>
<p>Si vous ne voyez pas <code>Node.js</code>, il faut d'abord installer le module <code>Node.js</code> sur le serveur en cliquant sur <code>Install Application</code> et en sélectionnant <code>Node.js</code>.</p>
</blockquote>
<p>Ensuite, cliquez sur <code>Enable Node.js</code> pour activer Node.js sur le domaine. Sélectionnez la version <code>18</code> la plus récente possible et cliquez sur <code>Apply</code>.</p>
<p>Configurez ensuite Node.js pour que le <code>Dashboard</code> affiche les informations suivantes :</p>
<ul>
<li>Node.js version : <code>18.X.X</code></li>
<li>Package Manager : <code>npm</code></li>
<li>Document root : <code>/&lt;path/to/root/document/server&gt;/.next/static</code></li>
<li>Application mode : <code>production</code></li>
<li>Application URL : <code>https://&lt;domaine&gt;.fr</code></li>
<li>Application root : <code>/&lt;path/to/root/document/server&gt;</code></li>
<li>Application startup file : <code>node_modules/.bin/next</code></li>
</ul>
<p>Enfin, cliquez sur <code>+ NPM install</code> pour installer les dépendances du projet, puis allez dans <code>Run Node.js commands</code> et exécutez la commande <code>npm run deploy</code> pour construire le site et redémarrer le serveur.</p>
<p>Si tout s'est bien passé, vous devriez voir le site <em>https://domaine.fr</em> être accessible.</p>
<blockquote>
<p><strong>Note :</strong> Si des erreurs apparaissent, il faut vérifier que les étapes précédentes ont bien été réalisées.</p>
</blockquote>
<h2>Déploiement sur le serveur de production</h2>
<p>Pour déployer le projet, rendez-vous sur le serveur Plesk. Ensuite, allez sur le domaine <code>stuart.crescendo-restauration.fr</code> et cliquez sur <code>Git</code>.</p>
<p>Ensuite, cliquez sur <code>Pull now</code> pour récupérer les dernières modifications du projet et déployer le projet.</p>
<p>Ensuite, allez sur le domaine <code>stuart.crescendo-restauration.fr</code> et cliquez sur <code>Node.js</code>.</p>
<p>Une fois sur la page, cliquez sur <code>NPM install</code> pour installer les dépendances du projet, puis allez dans <code>Run Node.js commands</code> et exécutez la commande <code>npm run deploy</code> pour construire le site et redémarrer le serveur.</p>
<p>Enfin, visite le site <a href="https://stuart.crescendo-restauration.fr">https://stuart.crescendo-restauration.fr</a> pour voir le résultat.</p>
</article>
		<button onclick="scrollToTop()" class="fixed bottom-4 right-4 btn btn-primary btn-outline">
			<i class="bi bi-arrow-up-square"></i>
			<span class="sr-only">Go to the top</span>
		</button>
		<script>
			function scrollToTop() {
				window.scrollTo({
					top: 0,
					left: 0,
					behavior: 'smooth'
				});
			}
		</script>
	</main>
	<footer class="footer footer-center p-4 bg-base-300 text-base-content">
  <div>
    <p>Copyright © <span>2023</span></p>
  </div>
</footer>
	<dialog id="searchModal" class="modal">
    <form method="dialog" class="modal-box">
        <div id="search"></div>
    </form>
    <form method="dialog" class="modal-backdrop">
      <button>close</button>
    </form>
</dialog>


</body>
</html>